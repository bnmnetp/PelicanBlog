Title: python + growl + remember the milk = launchbar task management
Date: 2009/01/27
Slug: python-growl-remember-the-milk-launchbar-task-management
Tags: python
Link: 
Description: 


<h3>Intro</h3><br />Once I could add tasks to my RTM account through LaunchBar I wanted a way to quickly pull up a view of what tasks were due today through LaunchBar.  The Growl library provides a nice way of doing this.<br /><br />The overview is as follows:  Activate LaunchBar and type due.  This due is installed as a search shortcut and you can search for today, tomorrow, or all (abbreviations are also easy).  The search shortcut runs the python script that searches your tasks on Remember the Milk.  For each task it finds it puts up a sticky Growl notification so you get a nice list of tasks on your screen.  You could easily customize the script to put all the tasks in a single notification but I like them separate.<br /><br />Since the Growl module registers this script as an application you can also use the Growl Preference Pane to customize the look and feel or even the location of your notifications.  You can also customize whether you want the notifications to be sticky or not.<br /><br /><h3>The Code</h3><br />Here is the code for doing all of this.  It makes use of the filter parameter on getList.<br /><br /><pre><br />#!/usr/bin/env python<br /><br />from rtm import *<br />import sys<br />import Growl<br /><br />def sendNotify(ts):<br />    if type(ts.task) == list:<br />        for j in range(len(ts.task)):<br />            notifier.notify("today","Task Due: "+ts.task[j].due[:10],ts.name,sticky=True)<br />    else:<br />        notifier.notify("today","Task Due: "+ts.task.due[:10],ts.name,sticky=True)<br /><br />if len(sys.argv) == 2:<br />    command = sys.argv[1]<br />else:<br />    command = "today"<br /><br />apiKey = "get your own"<br />secret = "this too"<br />token = "You will create this"<br /><br />name = "RTMDue"<br />notifications = ["today","tomorrow"]<br />notifier = Growl.GrowlNotifier(name,notifications)<br />notifier.register()<br /><br />if command[:3] == "tod" or command == '':<br />    cutoff = 'today'<br />elif command[:3] == "tom":<br />    cutoff = 'tomorrow'<br />else:<br />    cutoff = None <br /><br />rtm = createRTM(apiKey, secret, token)<br /><br />if cutoff:<br />    filterString = 'status:incomplete and (due:%s or dueBefore:%s)'%(cutoff,cutoff)<br />else:<br />    filterString = 'status:incomplete'<br /><br />theTasks = rtm.tasks.getList(filter=filterString)<br /><br />if type(theTasks.tasks.list) == list:<br />    for i in range(len(theTasks.tasks.list)):<br />        if type(theTasks.tasks.list[i].taskseries) == list:<br />            for j in range(len(theTasks.tasks.list[i].taskseries)):<br />                ts = theTasks.tasks.list[i].taskseries[j]<br />                sendNotify(ts)<br />        else:<br />            ts = theTasks.tasks.list[i].taskseries<br />            sendNotify(ts)<br />else:<br />    if type(theTasks.tasks.list.taskseries) == list:<br />        for i in range(len(theTasks.tasks.list.taskseries)):<br />            ts = theTasks.tasks.list.taskseries[i]<br />            sendNotify(ts)<br />    else:<br />        ts = theTasks.tasks.list.taskseries<br />        sendNotify(ts)<br /><br /></pre><br /><br /><h3>Next Steps</h3><br />It would be great if I can figure out a way to have the Growl notification box call a script to mark the task as done.  Feel free to leave comments or suggestions or improvements in the comments.<br /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/2759017781463016019-8714853411033992279?l=blog.bonelakesoftware.com' alt='' /></div>
