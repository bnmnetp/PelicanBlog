Title: python in your browser... in javascript!
Date: 2011/02/14
Slug: python-in-your-browser-in-javascript
Tags: python
Link: 
Description: 


I've recently been looking for ways to run Python in a browser.  There are lots of reasons why I think this is a cool idea.  For example, creating some simple tutorials, Making some online quizzes and tests, getting Python to run on my iPad...<br /><br />It looks like there are two projects that are actively working on solving this problem.  The first is called skulpt  (see the demo on <a href="http://www.skulpt.org/">skulpt.org</a>.)  This project actually reimplements the core of Python in Javascript by hand.  They are working on some modules, but right now it is basically the core Python language.<br /><br />The other project uses <a href="http://code.google.com/p/emscripten/">Emscripten</a> to compile the CPython C source code to javascript!  Yep you read that right.  You can see <a href="http://syntensity.com/static/python.html">here</a> that the core of Python 2.7 is running.  You can import sys, but thats about it.  Nevertheless both of these are really useful for beginning Python exercises.<br /><br />The problem with both of these is that right now there is no user level documentation.  Skulpt is particularly difficult as you can't even look at the demo page to see how its done.  You need to go digging through some additional source files from the distribution to figure out how to make it work for yourself.  The source code of the syntensity page is pretty easy to follow.  So here's a hello world program using skulpt.<br /><br /><pre class="prettyprint" style="overflow: auto;">&lt;script src="skulpt.js" type="text/javascript"&gt;<br />&lt;/script&gt;<br /><br /><br />&lt;script type="text/javascript"&gt;<br />function outf(text) {<br />   var mypre = document.getElementById("output");<br />   mypre.innerHTML = mypre.innerHTML + text;<br />}<br /><br />function runit() {<br />   var prog = document.getElementById("yourcode").value;<br />   var mypre = document.getElementById("output");<br />   mypre.innerHTML = '';<br />   Sk.configure({output:outf});<br />   try {<br />      eval(Sk.importMainWithBody("&lt;stdin&gt;",false,prog));<br />   } catch (e) {<br />      alert(e);<br />   }<br />}<br />&lt;/script&gt;<br />&lt;h3&gt;Try This&lt;/h3&gt;<br />&lt;form&gt;<br />&lt;textarea edit_id="eta_5" id="yourcode"&gt;<br />print "Hello World"<br />&lt;/textarea&gt;<br />&lt;button onclick="runit()" type="button"&gt;Run&lt;/button&gt;<br />&lt;/form&gt;<br /><br />&lt;pre id="output"&gt;&lt;/pre&gt;<br /></pre><br /><br />Its a bit on the verbose side, and it could certainly be improved so that less code would have to be replicated if you wanted to put multiple input/output areas on a single page, but as a learning example I think it works OK.  The try/catch block around the Sk.importMainWithBody function call will capture Python runtime errors and throw them.  This is a nice way to inform your users of syntax errors in any code they are trying out.<br /><br />I'm certainly no expert in either implementation, I just offer this post as an example and a time saver for anyone else trying to get going with either implementation.<div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/2759017781463016019-7271951656985409817?l=blog.bonelakesoftware.com' alt='' /></div>
